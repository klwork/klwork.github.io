<!DOCTYPE HTML>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Klwork">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->

<meta name="description" content="klwork">





<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>Docker简介和安装 | Klwork</title>


    <link rel="alternate" href="/atom.xml" title="Klwork" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="wangwei">
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://yoursite.com">Klwork</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/机器学习/"><i class="fa "></i>机器学习</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/程序员的FRM学习之路/"><i class="fa "></i>FRM学习之路</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about"><i class="fa "></i>关于</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Docker简介和安装">
            
	            Docker简介和安装
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/容器技术">
            容器技术
        </a>
    </span>
    

    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/中间件" title="中间件">
                        中间件
                    </a>
                
                    <a href="/tags/分布式" title="分布式">
                        分布式
                    </a>
                
                    <a href="/tags/Docker" title="Docker">
                        Docker
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2016/09/04</span>
        </span>
        
    
</div>

            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>896</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <h1 id="Docker简介"><a href="#Docker简介" class="headerlink" title="Docker简介"></a>Docker简介</h1><p>一个容器实质是运行在宿主机器上的一个进程，最小组成公式为：<br><code>容器＝cgroups + namespace + rootfs + engine</code></p>
<h1 id="Docker历史"><a href="#Docker历史" class="headerlink" title="Docker历史"></a>Docker历史</h1><table>
<thead>
<tr>
<th>column</th>
<th>column</th>
</tr>
</thead>
<tbody>
<tr>
<td>2008 年</td>
<td>Solomon Hykes 为了建立一个与编程语言无关的平台即服务产品，创立了 dotCloud 公司。</td>
</tr>
<tr>
<td>2013 年 3 月</td>
<td>dotCloud 将其核心组件 Docker 开源</td>
</tr>
<tr>
<td>6 个月内</td>
<td>Docker 早期的版本只是在简单封装 LXC 以及联合文件系统（union filesystem）之上多加了点东西，而在随后的6 个月内，Docker 就在 GitHub 上获得了 6700 多颗星，以及 175 名非公司员工的贡献者。这导致 dotCloud 把公司名称改为 Docker，并将公司的商业模式重新定位</td>
</tr>
<tr>
<td>2013 年 9 月</td>
<td>红帽于 2013 年 9 月成为了它的主要合作伙伴，利用 Docker 来驱动它的 OpenShift 云业务。谷歌、亚马逊和 DigitalOcean 也迅速地在其云服务平台提供 Docker 的支持</td>
</tr>
<tr>
<td>2014 年 6 月</td>
<td>Docker 1.0发布，代表着稳定性与可靠性的飞跃，同时，Docker 推出了一个名为 Docker Hub 的公共容器仓库，这标志着 Docker 从一个单纯的容器引擎开始转变为一个完整的平台。</td>
</tr>
<tr>
<td>2014 年 12 月</td>
<td>在 2014 年 12 月举行的 DockerConEU 上，Docker Swarm 与 Docker Machine 同时面世。 Docker Swarm 是一个 Docker 集群管理工具，而 Docker Machine 是个部署 Docker 主机的命令行工具。这表明 Docker 的意图不仅仅是提供 Docker 引擎，而是提供一个完整且综合的容器运行方案。</td>
</tr>
<tr>
<td>2015 年 6 月</td>
<td>DockerCon 在旧金山举行，来自 Docker 的 Solomon Hykes 与来自 CoreOS 的 Alex Polvi 宣布开放容器促进会（当时称为开放容器计划，Open Container Project）正式成立，目的是要发展出一套通用的容器格式与运行环境的标准。</td>
</tr>
<tr>
<td>2015 年 6 月</td>
<td>FreeBSD 项目宣布支持 Docker 利用 ZFS 和 Linux 兼容层来运行</td>
</tr>
<tr>
<td>2015 年 8 月</td>
<td>Docker 与微软推出专为 Windows server开发的 Docker Engine“技术预览”版</td>
</tr>
</tbody>
</table>
<h1 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h1><p>微服务是容器最主要的用例，也是容器技术兴起的最大推动力。<br>64 位 Linux 是唯一一个能稳定运行 Docker 且适合用于生产环境的平台</p>
<h2 id="简单的安装"><a href="#简单的安装" class="headerlink" title="简单的安装"></a>简单的安装</h2><p><code>sudo apt-get update</code></p>
<p><code>sudo apt-get install -y docker.io</code></p>
<h2 id="官方源安装"><a href="#官方源安装" class="headerlink" title="官方源安装"></a>官方源安装</h2><p> <code>curl https://get.docker.com &gt; /tmp/docker/install.sh</code><br> <code>chmod +x  /tmp/docker/install.sh</code><br> <code>/tmp/docker/install.sh</code></p>
<h2 id="进行测试"><a href="#进行测试" class="headerlink" title="进行测试"></a>进行测试</h2><h3 id="开启docker的守护进程"><a href="#开启docker的守护进程" class="headerlink" title="开启docker的守护进程"></a>开启docker的守护进程</h3><pre><code>sudo service docker start
</code></pre><blockquote>
<p>配置开机启动,执行<code>sudo systemctl enable docker</code></p>
</blockquote>
<h3 id="不使用sudo命令执行Docker"><a href="#不使用sudo命令执行Docker" class="headerlink" title="不使用sudo命令执行Docker"></a>不使用sudo命令执行Docker</h3><p>因为 Docker 运行时需要特殊权限，所以默认执行命令时都必须在前面加上 sudo。<br>将当前用户加入到组docker下，</p>
<p>加入用户到docker组中,</p>
<pre><code>sudo usermod -aG docker myuser
</code></pre><p>以后就不需要使用sudo来执行了。<br>可能需要重新启动，Docker 服务<code>sudo service docker restart</code></p>
<blockquote>
<p>docker组是在安装docker的时候自动建立的<br>可以通过<code>cut -d: -f1 /etc/group | grep docker</code>查看<br>需要注意：重新启动计算机或者注销用户再登入，才能生效。</p>
</blockquote>
<h3 id="测试安装"><a href="#测试安装" class="headerlink" title="测试安装"></a>测试安装</h3><pre><code>docker version
</code></pre><p>查看正在运行的容器</p>
<pre><code>Client:
 Version:      1.12.6
 API version:  1.24
 Go version:   go1.6.2
 Git commit:   78d1802
 Built:        Tue Jan 31 23:35:14 2017
 OS/Arch:      linux/amd64

Server:
 Version:      1.12.6
 API version:  1.24
 Go version:   go1.6.2
 Git commit:   78d1802
 Built:        Tue Jan 31 23:35:14 2017
 OS/Arch:      linux/amd64
</code></pre><p>上面的结果表示已经准备就绪，如果有错误，可以<code>sudo docker daemon</code> 来手动启动 Docker 守护进程，并查看错误信息。</p>
<h2 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a>其他操作</h2><h3 id="更新Docker"><a href="#更新Docker" class="headerlink" title="更新Docker"></a>更新Docker</h3><pre><code>`sudo apt-get upgrade docker-engine`
</code></pre><h3 id="卸载Docker"><a href="#卸载Docker" class="headerlink" title="卸载Docker"></a>卸载Docker</h3><pre><code>`sudo apt-get purge docker-engine`
</code></pre><h3 id="进行加速"><a href="#进行加速" class="headerlink" title="进行加速"></a>进行加速</h3><p>Docker Hub是全球最大的Docker共用仓库，为了解决国内用户使用 Docker Hub 时遇到的稳定性及速度问题，可以改变默认镜像地址。<br>可以参考<a href="http://guide.daocloud.io/dcs/daocloud-9153151.html" target="_blank" rel="noopener">http://guide.daocloud.io/dcs/daocloud-9153151.html</a></p>
<p><code>curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://d22ab3fe.m.daocloud.io</code></p>
<p>执行成功后，如果Docker 版本在 1.12 或更高，会创建或修改 /etc/docker/daemon.json 文件<br>{“registry-mirrors”: [“<a href="http://d22ab3fe.m.daocloud.io&quot;]}" target="_blank" rel="noopener">http://d22ab3fe.m.daocloud.io&quot;]}</a></p>
<p>进行重新启动<br> <code>sudo systemctl restart docker.service</code></p>
<p>第一个命令<br> <code>docker run ubuntu echo &quot;Hello World&quot;</code><br> 出现hello</p>
<h2 id="Harbor安装"><a href="#Harbor安装" class="headerlink" title="Harbor安装"></a>Harbor安装</h2><p>  $ wget <a href="https://github.com/vmware/harbor/releases/download/v1.1.2/harbor-online-installer-v1.1.2.tgz" target="_blank" rel="noopener">https://github.com/vmware/harbor/releases/download/v1.1.2/harbor-online-installer-v1.1.2.tgz</a><br>    $ tar xvf harbor-online-installer-v1.1.2.tgz</p>
<p>用户名： admin<br>密码： Harbor12345</p>
<p>修改/lib/systemd/system/docker.service</p>
<pre><code># Modified,origin: ExecStart=/usr/bin/dockerd -H fd://
ExecStart=/usr/bin/docker daemon -H fd:// --insecure-registry xx.xxx.xx.xx:5000
</code></pre><p>然后执行命令：</p>
<pre><code>sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre><p>重启<br>sudo docker-compose stop<br>sudo docker-compose up -d</p>
<p>其他目录文件<br>/etc/default/docker<br>/etc/init/docker.conf<br>/etc/init.d/docker</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>然而在某些情况下（例如， Ubuntu Docker 容器）， net-tools 工具包将不会被默认安装，这就意味着不能使用 ifconfig 。尽管如此，还是可以用软件仓库来安装 net-tools 。<br>sudo apt-get install net-tools</p>
<p><a href="https://blog.csdn.net/aixiaoyang168/article/details/73549898" target="_blank" rel="noopener">https://blog.csdn.net/aixiaoyang168/article/details/73549898</a><br><a href="https://www.cnblogs.com/huangjc/p/6420355.html" target="_blank" rel="noopener">https://www.cnblogs.com/huangjc/p/6420355.html</a></p>
<p>#参考网站 #</p>
<ul>
<li><a href="http://www.cnblogs.com/ola2010/p/5524826.html" target="_blank" rel="noopener">dock安装</a></li>
</ul>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">Snippet</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2016/09/04/11容器技术/容器构微服务/" class="pre-post btn btn-default" title="容器构建微服务">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">容器构建微服务</span>
        </a>
    
    
        <a href="/2016/09/04/13基础技术/消息队列/mq学习/" class="next-post btn btn-default" title="MQ简单学习">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">MQ简单学习</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
    
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'xOKV9J4UeQAtVkvnJC7Kq2Jn-gzGzoHsz',
            appKey: 'erIpQac4azoCmgfBB7Dl9maa',
            placeholder: '说点什么吧',
            notify: false,
            verify: false,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-Hans'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">Table of Contents</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker简介"><span class="toc-text">Docker简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker历史"><span class="toc-text">Docker历史</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker安装"><span class="toc-text">Docker安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#简单的安装"><span class="toc-text">简单的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#官方源安装"><span class="toc-text">官方源安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#进行测试"><span class="toc-text">进行测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开启docker的守护进程"><span class="toc-text">开启docker的守护进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不使用sudo命令执行Docker"><span class="toc-text">不使用sudo命令执行Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试安装"><span class="toc-text">测试安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他操作"><span class="toc-text">其他操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#更新Docker"><span class="toc-text">更新Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#卸载Docker"><span class="toc-text">卸载Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#进行加速"><span class="toc-text">进行加速</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Harbor安装"><span class="toc-text">Harbor安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-text">问题</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2017
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>