<!DOCTYPE HTML>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Klwork">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->

<meta name="description" content="klwork">





<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>k8s入门 | Klwork</title>


    <link rel="alternate" href="/atom.xml" title="Klwork" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    





    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(/image/ban.png)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="wangwei">
            <!--<img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">-->
        </a>
        <h2 style="color: #FAEBD7">专注于快乐的事情</h2>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://yoursite.com">Klwork</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>主页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/机器学习/"><i class="fa "></i>机器学习</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/程序员的FRM学习之路/"><i class="fa "></i>FRM学习之路</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about"><i class="fa "></i>关于</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="k8s入门">
            
	            k8s入门
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/容器技术">
            容器技术
        </a>
    </span>
    

    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/中间件" title="中间件">
                        中间件
                    </a>
                
                    <a href="/tags/分布式" title="分布式">
                        分布式
                    </a>
                
                    <a href="/tags/Docker" title="Docker">
                        Docker
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/02/27</span>
        </span>
        
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><h1 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h1><h2 id="安装docker包"><a href="#安装docker包" class="headerlink" title="安装docker包"></a>安装docker包</h2><p>$ sudo apt-get install \<br>    apt-transport-https \<br>    ca-certificates \<br>    curl \<br>    software-properties-common<br>添加docker官方GPG秘钥</p>
<p>curl -fsSL <a href="https://download.docker.com/linux/ubuntu/gpg" target="_blank" rel="noopener">https://download.docker.com/linux/ubuntu/gpg</a> | sudo apt-key add -<br>安装稳定版仓库</p>
<p>sudo add-apt-repository \<br>   “deb [arch=amd64] <a href="https://download.docker.com/linux/ubuntu" target="_blank" rel="noopener">https://download.docker.com/linux/ubuntu</a> \<br>   $(lsb_release -cs) \<br>   stable”<br>再次更新源</p>
<p>sudo apt-get update<br>安装docker-ce</p>
<p>参考<br>apt-cache madison docker-ce</p>
<p>sudo apt-get install docker-ce=<version></version></p>
<p>.默认情况下这个配置文件夹并不存在，我们要创建它<br>$ mkdir -p /etc/systemd/system/docker.service.d</p>
<h2 id="系统初始化"><a href="#系统初始化" class="headerlink" title="系统初始化"></a>系统初始化</h2><p>echo “127.0.0.1 ww-server-32” &gt;&gt; /etc/hosts</p>
<h3 id="关闭swap"><a href="#关闭swap" class="headerlink" title="关闭swap"></a>关闭swap</h3><p>如果不关闭，默认配置下kubelet将无法启动<br>swapoff -a</p>
<h3 id="设置系统参数"><a href="#设置系统参数" class="headerlink" title="设置系统参数"></a>设置系统参数</h3><p>修改内核参数</p>
<p>cat &lt;<eof>  /etc/sysctl.d/k8s.conf<br>net.bridge.bridge-nf-call-ip6tables = 1<br>net.bridge.bridge-nf-call-iptables = 1<br>EOF</eof></p>
<p>修改后，及时生效<br>sysctl –system</p>
<h2 id="安装相应软件"><a href="#安装相应软件" class="headerlink" title="安装相应软件"></a>安装相应软件</h2><p>配置apt-get的源<br><code>cat kube_apt_key.gpg | apt-key add -</code></p>
<p><code>echo &quot;deb [arch=amd64] https://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial main main&quot; &gt;&gt; /etc/apt/sources.list</code></p>
<p><code>apt-get install -y kubelet kubeadm kubectl kubernetes-cni</code></p>
<h2 id="安装镜像"><a href="#安装镜像" class="headerlink" title="安装镜像"></a>安装镜像</h2><blockquote>
<p>如果下载自己的或者dockerhub的镜像。可以利用脚本，批量替换镜像imagename<br>docker images | sed ‘s/foxchan/gcr.io\/google_containers/‘| awk ‘{print “docker tag “$3” “$1”:”$2}’</p>
</blockquote>
<p>docker的cgroup driver与 –cgroup-driver要一致。 可以用 docker info |grep Cgroup 查看，有可能是systemd 或者 cgroupfs</p>
<h2 id="配置kubelet"><a href="#配置kubelet" class="headerlink" title="配置kubelet"></a>配置kubelet</h2><h3 id="配置pod的基础镜像"><a href="#配置pod的基础镜像" class="headerlink" title="配置pod的基础镜像"></a>配置pod的基础镜像</h3><pre><code>cat &gt; /etc/systemd/system/kubelet.service.d/10-kubeadm.conf &lt;&lt;EOF
[Service]
Environment=&quot;KUBELET_EXTRA_ARGS=--pod-infra-container-image=registry.cn-hangzhou.aliyuncs.com/szss_k8s/pause-amd64:3.0&quot;
EOF
</code></pre><h2 id="启动kubelet"><a href="#启动kubelet" class="headerlink" title="启动kubelet"></a>启动kubelet</h2><pre><code>systemctl daemon-reload
systemctl restart kubelet
</code></pre><p>使用<code>kubelet version</code>参看可以看到已经启动</p>
<p> <code>systemctl status kubelet.service</code></p>
<p>需要具体信息可以使用参看<br>    <code>journalctl -u kubelet -f</code></p>
<blockquote>
<p>kubelet version –runtime-cgroups=/systemd/system.slice –kubelet-cgroups=/systemd/system.slice</p>
</blockquote>
<p>执行以下命令可以重启kubelet</p>
<pre><code>systemctl restart kubelet
systemctl daemon-reload
</code></pre><p>ps -ef | grep kubelet</p>
<pre><code>/usr/bin/kubelet --bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf --pod-manifest-path=/etc/kubernetes/manifests --allow-privileged=true --network-plugin=cni --cni-conf-dir=/etc/cni/net.d --cni-bin-dir=/opt/cni/bin --cluster-dns=10.96.0.10 --cluster-domain=cluster.local --authorization-mode=Webhook --client-ca-file=/etc/kubernetes/pki/ca.crt --cadvisor-port=0 --rotate-certificates=true --cert-dir=/var/lib/kubelet/pki --pod-infra-container-image=registry.cn-hangzhou.aliyuncs.com/google_containers/pause-amd64:3.1
</code></pre><h3 id="重新配置"><a href="#重新配置" class="headerlink" title="重新配置"></a>重新配置</h3><p>systemctl stop kubelet;<br>docker rm -f $(docker ps -q);<br>mount | grep “/var/lib/kubelet/*” | awk ‘{print $3}’ | xargs umount 1&gt;/dev/null 2&gt;/dev/null;<br>rm -rf /var/lib/kubelet /etc/kubernetes /var/lib/etcd /etc/cni;<br>systemctl start kubelet;<br>kubeadm init –token=<token></token></p>
<h2 id="使用kubeadm初始化集群"><a href="#使用kubeadm初始化集群" class="headerlink" title="使用kubeadm初始化集群"></a>使用kubeadm初始化集群</h2><pre><code>export KUBE_REPO_PREFIX=&quot;registry.cn-hangzhou.aliyuncs.com/szss_k8s&quot;
export KUBE_ETCD_IMAGE=&quot;registry.cn-hangzhou.aliyuncs.com/szss_k8s/etcd-amd64:3.0.17&quot;
kubeadm init  --kubernetes-version=v1.9.0 --skip-preflight-checks
</code></pre><p>kubeadm init  –kubernetes-version=v1.9.2 –skip-preflight-checks</p>
<blockquote>
<p>kubeadm init –pod-network-cidr=172.30.0.0/20 –kubernetes-version=v1.9.0 –skip-preflight-checks</p>
</blockquote>
<blockquote>
<p>如果kubeadm出错，修改完成之后需要 <code>kubeadm reset</code>在重启初始化</p>
</blockquote>
<h3 id="让master节点参与调度"><a href="#让master节点参与调度" class="headerlink" title="让master节点参与调度"></a>让master节点参与调度</h3><p>默认情况下，为了保证master的安全，master是不会被调度到app的。你可以取消这个限制通过输入。</p>
<pre><code>kubectl taint nodes --all node-role.kubernetes.io/master-
</code></pre><h3 id="检查master安装"><a href="#检查master安装" class="headerlink" title="检查master安装"></a>检查master安装</h3><p>kubectl get componentstatuses</p>
<p>里面有其他的文件<br>/etc/kubernetes/manifests</p>
<h2 id="配置kubectl的kubeconfig"><a href="#配置kubectl的kubeconfig" class="headerlink" title="配置kubectl的kubeconfig"></a>配置kubectl的kubeconfig</h2><p>最新的kubectl链接api server不是通过8080端口连接的，而是通过6443端口，可以在admin.conf查看<br>kubectl get nodes<br>The connection to the server localhost:8080 was refused - did you specify the right host or port?</p>
<p>或者出现Unable to connect to the server: x509:</p>
<p>mkdir -p $HOME/.kube<br>cp -i /etc/kubernetes/admin.conf $HOME/.kube/config<br>chown $(id -u):$(id -g) $HOME/.kube/config<br>kubectl get nodes</p>
<pre><code>NAME           STATUS     ROLES     AGE       VERSION
ww-server-32   NotReady   master    3m        v1.9.0
</code></pre><h2 id="kube-dns镜像"><a href="#kube-dns镜像" class="headerlink" title="kube-dns镜像"></a>kube-dns镜像</h2><p>使用 kubectl get nodes参看NotReady 没有发现kube-dns镜像</p>
<p>要配置pod的网络，这里使用了flannel网络</p>
<p>kubectl create -f kube-flannel-rbac.yml</p>
<pre><code># Create the clusterrole and clusterrolebinding:
# $ kubectl create -f kube-flannel-rbac.yml
# Create the pod using the same namespace used by the flannel serviceaccount:
# $ kubectl create --namespace kube-system -f kube-flannel.yml
---
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: flannel
rules:
  - apiGroups:
      - &quot;&quot;
    resources:
      - pods
    verbs:
      - get
  - apiGroups:
      - &quot;&quot;
    resources:
      - nodes
    verbs:
      - list
      - watch
  - apiGroups:
      - &quot;&quot;
    resources:
      - nodes/status
    verbs:
      - patch
---
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: flannel
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: flannel
subjects:
- kind: ServiceAccount
  name: flannel
  namespace: kube-system
</code></pre><p>sudo kubectl apply -f <a href="https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml" target="_blank" rel="noopener">https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</a></p>
<h2 id="安装其他主机"><a href="#安装其他主机" class="headerlink" title="安装其他主机"></a>安装其他主机</h2><p>kubeadm init –apiserver-advertise-address=172.16.120.200 –pod-network-cidr=192.168.0.0/16 –ignore-preflight-errors ‘Swap’<br>主要目的是下载k8s相关组件d</p>
<p>使用flanne，需要设置–pod-network-cidr参数，10.244.0.0/16是kube-flannel.yml文件配置的默认网段，如果需要修改，–pod-network-cidr和kube-flannel.yml文件需要保持一致。<br>kubeadm init –kubernetes-version=v1.9.0 –pod-network-cidr=10.244.0.0/16 –skip-preflight-checks</p>
<h2 id="查看集群状态"><a href="#查看集群状态" class="headerlink" title="查看集群状态"></a>查看集群状态</h2><p>机器的端口如下：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>Kubernetes API server</td>
<td>6443*</td>
</tr>
<tr>
<td>etcd server client API</td>
<td>2379-2380</td>
</tr>
<tr>
<td>Kubelet API</td>
<td>10250</td>
</tr>
<tr>
<td>kube-scheduler</td>
<td>10251</td>
</tr>
<tr>
<td>kube-controller-manager</td>
<td>10252</td>
</tr>
<tr>
<td>Read-only Kubelet API</td>
<td>10255</td>
</tr>
</tbody>
</table>
<p>默认的端口范围:<a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/services-networking/service/</a></p>
<h3 id="kubectl查看node和pod的状态"><a href="#kubectl查看node和pod的状态" class="headerlink" title="kubectl查看node和pod的状态"></a>kubectl查看node和pod的状态</h3><p>kubectl get nodes</p>
<h2 id="node节点安装和加入集群"><a href="#node节点安装和加入集群" class="headerlink" title="node节点安装和加入集群"></a>node节点安装和加入集群</h2><p>export KUBE_REPO_PREFIX=”registry.cn-hangzhou.aliyuncs.com/szss_k8s”<br>export KUBE_ETCD_IMAGE=”registry.cn-hangzhou.aliyuncs.com/szss_k8s/etcd-amd64:3.0.17”<br>kubeadm join –token 242b80.86d585ebd6358b08 172.16.120.151:6443 –skip-preflight-checks</p>
<p>kubeadm join –token 0cb8d6.bc8e73f8d69d3110 10.168.1.111:6443 –discovery-token-ca-cert-hash sha256:96015707712d4b6a27c1d63ebfae0e0a22015c38f7c7b1c4983a93fae43d4060</p>
<p>node节点安装验证<br>kubectl get nodes</p>
<h2 id="部署Dashboard"><a href="#部署Dashboard" class="headerlink" title="部署Dashboard"></a>部署Dashboard</h2><p>学习<br><a href="http://www.dockerinfo.net/4468.html" target="_blank" rel="noopener">http://www.dockerinfo.net/4468.html</a><br>在开启TLS的Kubernetes1.6集群上安装Dashboard<br><a href="https://www.kubernetes.org.cn/3238.html" target="_blank" rel="noopener">https://www.kubernetes.org.cn/3238.html</a></p>
<p>wget <a href="https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml" target="_blank" rel="noopener">https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml</a></p>
<p>kubectl create -f kubernetes-dashboard.yml</p>
<p>kubectl get secret –all-namespaces | grep kubernetes-dashboard-admin<br>kubectl describe secret kubernetes-dashboard-admin-token-xxnml -n kube-system</p>
<p><a href="https://10.168.1.111:32270/#!/overview?namespace=default" target="_blank" rel="noopener">https://10.168.1.111:32270/#!/overview?namespace=default</a><br><a href="https://10.168.1.111:30865/#!/overview?namespace=default" target="_blank" rel="noopener">https://10.168.1.111:30865/#!/overview?namespace=default</a></p>
<p>10.168.1.111:8080/api/v1/proxy/namespaces/kube-system/services/kubernetes-dashboard</p>
<p>kubectl proxy –address=’10.168.1.111’ –port=8086 –accept-hosts=’^*$’</p>
<p><code>http://10.168.1.111:8086/ui</code>可以访问</p>
<p>参考<br><a href="https://blog.csdn.net/chenleiking/article/details/79316171" target="_blank" rel="noopener">https://blog.csdn.net/chenleiking/article/details/79316171</a><br><a href="https://www.cnblogs.com/zhenyuyaodidiao/p/6500897.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhenyuyaodidiao/p/6500897.html</a><br><a href="https://www.cnblogs.com/xinhaige/p/8595259.html" target="_blank" rel="noopener">https://www.cnblogs.com/xinhaige/p/8595259.html</a></p>
<p>kubectl apply -f kubernetes-dashboard.yml<br>kubectl apply -f kubernetes-dashboard-rbac-admin.yml</p>
<p> kubectl delete deployment  kubernetes-dashboard –namespace=kube-system<br> kubectl delete svc  kubernetes-dashboard –namespace=kube-system</p>
<p>  kubectl get svc  –all-namespaces<br> <a href="http://10.101.36.111:8055" target="_blank" rel="noopener">http://10.101.36.111:8055</a></p>
<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><p>Kubernetes  failed to get imageFs info: unable to find data for container</p>
<h2 id="一个简单的流程"><a href="#一个简单的流程" class="headerlink" title="一个简单的流程"></a>一个简单的流程</h2><p> kubectl create -f mysql-rc.yaml </p>
<p> kubectl get rc </p>
<p>kubectl get pods</p>
<p>查询原因<br>kubectl describe pods mysql</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>每天5分支<br><a href="http://www.cnblogs.com/CloudMan6/tag/Docker/default.html?page=3" target="_blank" rel="noopener">http://www.cnblogs.com/CloudMan6/tag/Docker/default.html?page=3</a></p>
<p><a href="https://www.jianshu.com/p/33b3fa304797" target="_blank" rel="noopener">https://www.jianshu.com/p/33b3fa304797</a></p>
<p><a href="https://mritd.me/2016/10/29/set-up-kubernetes-cluster-by-kubeadm/" target="_blank" rel="noopener">https://mritd.me/2016/10/29/set-up-kubernetes-cluster-by-kubeadm/</a></p>
<p><a href="https://github.com/EagleChen/kubernetes_init/blob/master/install.sh" target="_blank" rel="noopener">https://github.com/EagleChen/kubernetes_init/blob/master/install.sh</a><br>编译安装<br><a href="https://www.kubernetes.org.cn/3336.html" target="_blank" rel="noopener">https://www.kubernetes.org.cn/3336.html</a></p>
<p><a href="https://www.kubernetes.org.cn/3336.html" target="_blank" rel="noopener">https://www.kubernetes.org.cn/3336.html</a></p>
<p>Kubernetes创建可外部访问的mysql容器<br><a href="https://www.58jb.com/html/133.html" target="_blank" rel="noopener">https://www.58jb.com/html/133.html</a></p>
<p><a href="https://www.jianshu.com/p/21a39ee86311" target="_blank" rel="noopener">https://www.jianshu.com/p/21a39ee86311</a><br><a href="https://blog.csdn.net/zhuchuangang/article/details/76572157" target="_blank" rel="noopener">https://blog.csdn.net/zhuchuangang/article/details/76572157</a></p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">Klwork</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2018/02/27/11容器技术/docker常用操作/" class="pre-post btn btn-default" title="Docker常用操作">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">Docker常用操作</span>
        </a>
    
    
        <a href="/2018/02/27/11容器技术/使用容器构建dubbo服务/" class="next-post btn btn-default" title="使用容器构建dubbo服务">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">使用容器构建dubbo服务</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
   <p>评论系统未开启，无法评论！</p>

    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">Table of Contents</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#背景"><span class="toc-text">背景</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#安装步骤"><span class="toc-text">安装步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装docker包"><span class="toc-text">安装docker包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#系统初始化"><span class="toc-text">系统初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#关闭swap"><span class="toc-text">关闭swap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置系统参数"><span class="toc-text">设置系统参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装相应软件"><span class="toc-text">安装相应软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装镜像"><span class="toc-text">安装镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置kubelet"><span class="toc-text">配置kubelet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置pod的基础镜像"><span class="toc-text">配置pod的基础镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启动kubelet"><span class="toc-text">启动kubelet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#重新配置"><span class="toc-text">重新配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用kubeadm初始化集群"><span class="toc-text">使用kubeadm初始化集群</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#让master节点参与调度"><span class="toc-text">让master节点参与调度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#检查master安装"><span class="toc-text">检查master安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置kubectl的kubeconfig"><span class="toc-text">配置kubectl的kubeconfig</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kube-dns镜像"><span class="toc-text">kube-dns镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装其他主机"><span class="toc-text">安装其他主机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看集群状态"><span class="toc-text">查看集群状态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#kubectl查看node和pod的状态"><span class="toc-text">kubectl查看node和pod的状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#node节点安装和加入集群"><span class="toc-text">node节点安装和加入集群</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#部署Dashboard"><span class="toc-text">部署Dashboard</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#错误"><span class="toc-text">错误</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一个简单的流程"><span class="toc-text">一个简单的流程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考"><span class="toc-text">参考</span></a></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2017
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>